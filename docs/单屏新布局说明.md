# 单屏新布局说明

## 📐 布局设计

### 整体结构
新的单屏布局采用**上下分区**设计,充分利用屏幕空间,将视频流、3D视图和控制区域合理分配。

```
┌─────────────────────────────────────────────────────────┐
│ 顶部导航栏 (60px)                                       │
├───────────┬──────────────────────┬──────────────────────┤
│           │                      │                      │
│  左臂视角 │   机器人3D视图       │    右臂视角          │
│   (20%)   │      (60%)           │     (20%)            │
│           │                      │                      │
│   📹      │       🤖            │      📹             │
│  视频流   │   Three.js渲染      │     视频流           │
│           │                      │                      │
├───────────┴──────────────────────┴──────────────────────┤
│  控制按钮区域  │  状态监控区域   │   音频可视化         │
│    (45%)       │    (30%)        │     (25%)            │
│  所有操作按钮  │  系统状态显示   │   音频频谱           │
└────────────────┴─────────────────┴──────────────────────┘
```

## 🎨 区域划分

### 上半部分 (70%高度) - 视图区域

#### 1. 左臂视角 (20%宽度)
- **用途**: 显示左侧机械臂摄像头视角
- **当前状态**: 使用笔记本摄像头模拟(screenId=0)
- **特点**: 
  - 带有"📹 左臂视角"标题栏
  - 支持视频流控制
  - 可独立开关视频流

#### 2. 机器人3D视图 (60%宽度 - 主视图)
- **用途**: 显示宇树G1机器人3D模型
- **尺寸**: 800x500像素
- **功能**:
  - 实时显示机器人姿态
  - 手柄/按钮控制的动作反馈
  - 摇杆控制的自由移动
  - 背景网格和科技感光效
- **特点**:
  - 绿色边框高亮(主视图标识)
  - 带有"🤖 机器人3D视图"标题栏
  - 发光效果突出重要性

#### 3. 右臂视角 (20%宽度)
- **用途**: 显示右侧机械臂摄像头视角
- **当前状态**: 使用笔记本摄像头模拟(screenId=1)
- **特点**:
  - 带有"📹 右臂视角"标题栏
  - 支持视频流控制
  - 可独立开关视频流

### 下半部分 (30%高度) - 控制区域

#### 1. 控制按钮区域 (45%宽度)
- **内容**:
  - 基本控制:启动、停止、暂停、继续
  - 运动控制:前进、后退、左转、右转
  - 动作控制:右手挥手、左手点赞、抬右腿、抬左腿
  - 紧急控制:紧急停止、系统重置
- **特点**:
  - 支持外设控制(手柄)
  - 动作按钮支持按住/松开模式
  - 可滚动查看所有按钮

#### 2. 状态监控区域 (30%宽度)
- **内容**:
  - 系统状态
  - 机器人遥测数据
  - 诊断信息
- **特点**:
  - 实时更新
  - 紧凑显示模式

#### 3. 音频可视化区域 (25%宽度)
- **内容**:
  - 音频频谱显示
  - 实时音量监控
- **特点**:
  - 科技感可视化效果

## 🎯 设计理念

### 1. 视觉层次
- **主视图突出**: 中央3D视图占据最大空间,绿色边框强调
- **视角对称**: 左右机械臂视角对称分布,便于操作员对比观察
- **控制集中**: 所有控制元素集中在底部,符合操作习惯

### 2. 空间利用
- **上下分区**: 70/30黄金比例,视觉主体在上,操作控制在下
- **三分法**: 上部左中右三分,便于视线快速切换
- **模块化**: 每个区域功能独立,便于维护和扩展

### 3. 响应式设计
- **自适应**: 各区域采用flex布局,自动适应屏幕尺寸
- **渐进式**: 提供多个断点,在不同分辨率下优化显示
- **可扩展**: 预留了多视频流框架,方便添加更多视角

## 🔧 技术实现

### 多视频流框架
```tsx
// 左臂视角 - screenId=0
<VideoPlayer compact={true} screenId={0} showControls={true} />

// 右臂视角 - screenId=1 
<VideoPlayer compact={true} screenId={1} showControls={true} />
```

当前两个视频流都使用笔记本摄像头,未来可以:
1. 连接外部USB摄像头
2. 接入网络摄像头(RTSP/WebRTC)
3. 接入机器人真实摄像头流

### CSS Grid vs Flexbox
- **Grid**: 原布局使用Grid,适合固定区域划分
- **Flexbox**: 新布局使用Flex,更灵活的比例分配
- **优势**: 更好的响应式表现,更容易调整比例

## 📝 使用说明

### 视频流控制
1. 每个视频区域都有独立的控制按钮
2. 点击📴按钮关闭视频流
3. 点击📹按钮重新开启视频流
4. 支持播放/暂停、截图、全屏功能

### 3D视图交互
1. **手柄左摇杆**: 控制机器人移动
2. **LB/RB按钮**: 快速旋转45度
3. **ABXY按钮**: 控制肢体动作(按住抬起,松开还原)
4. **背景自动旋转**: 增强视觉效果

### 控制面板
1. **点击模式**: 基本控制和运动控制按钮
2. **按住模式**: 动作控制按钮(挥手、点赞、抬腿)
3. **手柄优先**: 外设连接时优先响应手柄输入

## 🚀 未来扩展

### 可添加的功能
1. **更多视角**: 
   - 俯视视角(顶部摄像头)
   - 全景视角(360度环视)
   - 第一人称视角(头部摄像头)

2. **画中画模式**:
   - 次要视角以小窗形式叠加在主视图
   - 可拖动调整位置
   - 可切换主次视角

3. **视图切换**:
   - 点击侧边视角放大到主视图
   - 手势或快捷键快速切换
   - 多视角同步播放

4. **录制回放**:
   - 录制多路视频流
   - 同步3D姿态数据
   - 回放分析功能

## ⚙️ 配置调整

如需调整布局比例,修改以下CSS:

```css
/* 上下分区比例 */
.view-section {
  flex: 0 0 70%;  /* 视图区域70% */
}

.control-section {
  flex: 0 0 30%;  /* 控制区域30% */
}

/* 左中右分区比例 */
.view-left-arm {
  flex: 0 0 20%;  /* 左臂20% */
}

.view-main {
  flex: 0 0 60%;  /* 主视图60% */
}

.view-right-arm {
  flex: 0 0 20%;  /* 右臂20% */
}
```

## 🎨 主题定制

颜色方案位于CSS变量:
- 背景色: `rgba(15, 23, 42, 0.6)`
- 边框色: `#334155`
- 强调色: `#10b981` (绿色)
- 文字色: `#e2e8f0`

可以通过修改这些值来自定义界面风格。


